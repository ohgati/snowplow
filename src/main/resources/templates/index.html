<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" translate="no">
<head>
    <title>제설차</title>
    <meta name="google" content="notranslate" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"/>
    <script src="https://kit.fontawesome.com/872a12cba7.js" crossorigin="anonymous"></script>

    <!-- bootstrap -->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

    <!--Leaflet-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
</head>
<body>
    <div id="map" style="width: calc(100% - 400px); height: 100vh;"></div>
    <div class="menu-bar">
        <form id="searchFrm">
            <input type="hidden" id="term" name="term" value="15">
            <div style="margin-top: 8px;">
                <input type="text" id="stDate" name="stDate" style="width: 46.999%;display: inline-block;" class="hasDatepicker">
                ~
                <input type="text" id="edDate" name="edDate" style="width: 46.999%;display: inline-block" class="hasDatepicker">
            </div>
            <ul id="searchNav">
                <li onclick="setTerm(15, this)" class="active">15초</li>
                <li onclick="setTerm(30, this)">30초</li>
                <li onclick="setTerm(60, this)">1분</li>
                <li onclick="setTerm(300, this)">5분</li>
                <li onclick="setTerm(600, this)">10분</li>
                <li onclick="setTerm(900, this)">15분</li>
                <li onclick="setTerm(1800, this)">30분</li>
            </ul>
        </form>
        <div class="check-btn" onclick="searchSnowplow()">조회</div>
    </div>
</body>
<script>

    var map = L.map('map', {
        center: [33.450701, 126.570667], // 초기 중심 좌표
        zoom: 14, // 초기 줌 레벨 14 = zoom 의 0~13까지의 길이
        zoomControl: false
    });

    L.tileLayer('http://map.daumcdn.net/map_k3f_prod/bakery/image_map_png/PNG01/v26_gxuw0/{z}/{y}/{x}.png',
        {
            attribution: '&copy; <a href="#">Kakao Map</a> contributors', // 화면 오른쪽 하단 attributors
            maxZoom: 13, // 최대 줌
            minZoom: 0, // 최소 줌
            zoomReverse: true,
            zoomOffset: 1,
            subdomains: "0123",
            continuousWorld: true,
            tms: true
        }
    ).addTo(map);

    // var mapContainer = document.getElementById('map'), // 지도를 표시할 div
    //     mapOption = {
    //         center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
    //         level: 3 // 지도의 확대 레벨
    //     };
    //
    // // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
    // var map = new kakao.maps.Map(mapContainer, mapOption);
    //
    function setTerm(index, obj) {
        $("#searchNav li").removeClass("active");
        $(obj).addClass("active");
        alert(index)
    }

    function searchSnowplow() {
        let stDate = $('#stDate').val();
        let edDate = $('#edDate').val();

        $.ajax({
            url: '/searchSnowPlow',
            type: 'POST',
            data: {
                stDate: stDate,
                edDate: edDate
            },
            success: function(response) {
                console.log(response);
            },
            error: function (error) {
                console.error('Error:', error);
            }
        });
    }
</script>
</html>